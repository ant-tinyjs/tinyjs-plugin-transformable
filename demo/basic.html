<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>tinyjs-plugin-transformable Demo</title>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="yes" name="apple-touch-fullscreen"/>
<meta content="telephone=no,email=no" name="format-detection"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
<style>
html, body, p, div { margin:0; padding:0; }
</style>
</head>
<body>
<canvas id="J_tinyapp"></canvas>
<script src="https://gw.alipayobjects.com/os/lib/alipay/tiny.js/2.2.6/dist/browser/tiny.js"></script>
<script src="https://gw.alipayobjects.com/os/lib/tinyjs-plugin-ui/0.7.4/index.debug.js"></script>
<script src="../index.debug.js"></script>

<script type="text/javascript">
  // 新建 App
  var app = new Tiny.Application({
    view: 'J_tinyapp',
    width: 750,
    height: 750,
    showFPS: true,
    antialias: true,
    backgroundColor: 0x2a3145 // 画布背景色
  });

  var container = new Tiny.Container();
  app.run(container);

  // 限制拖拽范围
  // Tiny.Transformable.setDragArea(container, { offsetX: 0,offsetY: 0, width: 750, height: 750, strict: true });

  var url1 = 'https://mdn.alipayobjects.com/wufu_ainianhuabase/afts/img/KBk8TKwLpA8AAAAAAAAAAAAAD-GGAQBr/original';
  
  var sprite1 = Tiny.Sprite.from(url1);
  console.log(sprite1.getBounds());
  var ta1 = new Tiny.Transformable(sprite1);
  ta1.position.set(100, 100);
  container.addChild(ta1);

  var url2 = 'https://mdn.alipayobjects.com/wufu_ainianhuabase/afts/img/KBk8TKwLpA8AAAAAAAAAAAAAD-GGAQBr';
  
  var sprite2 = Tiny.Sprite.from(url2);
  console.log(sprite1.getBounds());
  var ta2 = new Tiny.Transformable(sprite2);
  ta2.on('activate', function () {
    console.log('ta2, activate');
  });
  ta2.on('deactivate', function () {
    console.log('ta2, deactivate');
  });
  ta2.on('remove:touchend', function(e) {
    console.log('remove', e);
    this.parent.removeChild(this);
  });
  // ta1.position.set(100, 100);
  container.addChild(ta2);
  

  // var sprite2 = Tiny.Sprite.from(url);
  // var ta2 = new Tiny.Transformable(sprite2);
  // ta2.position.set(200, 200);
  // container.addChild(ta2);

  // 九宫格等非 sprite 情况
  // const texture = Tiny.Texture.from(url);
  // const np = new Tiny.ui.NinePatch(texture, 400, 400, [100, 100, 100, 100], 0)
  // const tanp = new Tiny.Transformable(np);
  // container.addChild(tanp);
  
</script>
</body>
</html>
